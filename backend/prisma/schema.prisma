generator client {
  provider     = "prisma-client"
  output       = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model activities {
  id         String     @id
  owner_id   String
  habit_id   String
  caption    String
  media_urls String[]
  is_public  Boolean    @default(false)
  created_at DateTime   @default(now()) @db.Timestamptz(6)
  updated_at DateTime   @db.Timestamptz(6)
  habits     habits     @relation(fields: [habit_id], references: [id], onDelete: Cascade)
  comments   comments[]
  likes      likes[]
  views      views[]
}

model comments {
  id           String     @id
  owner_id     String
  comment_text String
  activity_id  String
  created_at   DateTime   @default(now()) @db.Timestamptz(6)
  activities   activities @relation(fields: [activity_id], references: [id], onDelete: Cascade)
}

model habits {
  id          String       @id
  owner_id    String
  title       String
  description String
  is_public   Boolean      @default(false)
  created_at  DateTime     @default(now()) @db.Timestamptz(6)
  updated_at  DateTime     @db.Timestamptz(6)
  activities  activities[]
}

model likes {
  id          String     @id
  owner_id    String
  activity_id String
  created_at  DateTime   @default(now()) @db.Timestamptz(6)
  activities  activities @relation(fields: [activity_id], references: [id], onDelete: Cascade)

  @@unique([owner_id, activity_id])
}

model views {
  id          String     @id
  activity_id String
  created_at  DateTime   @default(now()) @db.Timestamptz(6)
  owner_id    String
  activities  activities @relation(fields: [activity_id], references: [id], onDelete: Cascade)

  @@unique([owner_id, activity_id])
}
